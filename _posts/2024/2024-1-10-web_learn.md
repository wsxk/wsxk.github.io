---
layout: post
tags: [web]
title: "web security: 安全的本质&浏览器安全"
date: 2024-1-10 
author: wsxk
comments: true
---

- [前言](#前言)
- [1. 安全的本质](#1-安全的本质)
  - [1.1 安全三要素](#11-安全三要素)
  - [1.2 安全评估](#12-安全评估)
    - [1.2.1 资产等级划分](#121-资产等级划分)
    - [1.2.2 威胁分析](#122-威胁分析)
    - [1.2.3 风险分析](#123-风险分析)
    - [1.2.4 确认解决方案](#124-确认解决方案)
  - [1.3 对解决方案有帮助的几个原则](#13-对解决方案有帮助的几个原则)
    - [1.3.1 Secure By Default原则](#131-secure-by-default原则)
    - [1.3.2 最小权限原则](#132-最小权限原则)
    - [1.3.3 纵深防御原则](#133-纵深防御原则)
    - [1.3.4 数据与代码分离原则](#134-数据与代码分离原则)
    - [1.3.5 不可预测性原则](#135-不可预测性原则)
- [2. 浏览器安全](#2-浏览器安全)
  - [2.1 同源策略](#21-同源策略)


## 前言<br>
记录一下学习web安全的旅程，不过话又说回来，主要是看《白帽子讲web安全》的书，做一下自己感觉有用的记录（🦑<br>

## 1. 安全的本质<br>
从安全的角度来看，我们将不同重要程度的区域划分出来：
![](https://raw.githubusercontent.com/wsxk/wsxk_pictures/main/2023-12-30/20240110222229.png)
通过一个安全检查（过滤、净化）的过程，可以梳理未知的人或物，使其
变得可信任。被划分出来的具有不同信任级别的区域，我们称为信任域，
划分两个不同信任域之间的边界，我们称为信任边界。<br>
数据从高等级的信任域流向低等级的信任域，是不需要经过安全检查的；
数据从低等级的信任域流向高等级的信任域，则需要经过信任边界的安全
检查。<br>
***安全问题的本质是信任的问题***<br>
一切的安全方案设计的基础，都是建立在信任关系上的。我们必须相信一
些东西，必须有一些最基本的假设，安全方案才能得以建立；如果我们否
定一切，安全方案就会如无源之水，无根之木，无法设计，也无法完成

### 1.1 安全三要素<br>
`机密性(confidentiality)`：即要求数据不会被泄露<br>
`完整性(integrity)`: 即要求数据不会被篡改<br>
`可用性（avaliablity）`：即服务可用，不会被打挂<br>

### 1.2 安全评估<br>
分析安全问题，主要分为四个阶段<br>
**资产等级划分、威胁分析、风险分析、确认解决方案。**<br>
![](https://raw.githubusercontent.com/wsxk/wsxk_pictures/main/2023-12-30/20240110222854.png)
#### 1.2.1 资产等级划分<br>
资产等级划分，顾名思义了，以互联网公司为例，最重要的资产当然是用户数据，其次就是代码、员工信息，等等<br>
虽然这些资产都很重要，但是我们也需要分出三六九等<br>
当完成资产等级划分后，对要保护的目标已经有了一个大概的了解，接下来就是要划分信任域和信任边界了。通常我们用一种最简单的划分方式，就是从**网络逻辑**上来划分。比如最重要的数据放在数据库里，那么把数据库的服务器圈起来；Web应用可以从数据库中读/写数据，并对外提供服务，那再把Web服务器圈起来；最外面是不可信任的Internet。<br>
![](https://raw.githubusercontent.com/wsxk/wsxk_pictures/main/2023-12-30/20240110224319.png)
在这种情况，就需要再每个边界进行安全检查。<br>

#### 1.2.2 威胁分析<br>
可能造成危害的来源叫做`威胁`<br>
什么是威胁分析？威胁分析就是把所有的威胁都找出来。怎么找？一般是采用**头脑风暴法。**<br>
当然，也有一些比较科学的方法，比如使用一个模型，帮助我们去想，在哪些方面有可能会存在威胁，这个过程能够避免遗漏，这就是威胁建模。<br>
比如微软的`STRIDE`模型，它把威胁分为六类：<br>
![](https://raw.githubusercontent.com/wsxk/wsxk_pictures/main/2023-12-30/20240111001131.png)

#### 1.2.3 风险分析<br>
可能出现的损失叫做`风险`<br>
`DREAD`模型用于衡量风险大小<br>
![](https://raw.githubusercontent.com/wsxk/wsxk_pictures/main/2023-12-30/20240111213201.png)


#### 1.2.4 确认解决方案<br>
安全评估的产出物，就是安全解决方案。解决方案一定要有针对性，这种
针对性是由资产等级划分、威胁分析、风险分析等阶段的结果给出的<br>
一个优秀的安全方案应该具备以下特点：<br>
```
• 能够有效解决问题；
• 用户体验好；
• 高性能；
• 低耦合；
• 易于扩展与升级。
```

### 1.3 对解决方案有帮助的几个原则<br>
#### 1.3.1 Secure By Default原则<br>
本质上是多使用**白名单**而不是黑名单<br>
在选择使用白名单时，需要注意避免出现类似通配符的问题。<br>

#### 1.3.2 最小权限原则<br>
最小权限原则要求系统只授予主体必要的权限，而不要过度授权，这样能有效地减少系统、网络、应用、数据库出错的机会。<br>
说白了，就是没必要的权限不要给<br>

#### 1.3.3 纵深防御原则<br>
纵深防御包含两层含义：<br>
首先，要在各个不同层面、不同方面实施安全方案，避免出现疏漏，不同安全方案之间需要相互配合，构成一个整体；其次，要在正确的地方做正确的事情，即：在解决根本问题的地方实施针对性的安全方案。<br>

#### 1.3.4 数据与代码分离原则<br>
字面意思<br>
数据不能与代码放在一起<br>

#### 1.3.5 不可预测性原则<br>
不可预测性（Unpredictable），能有效地对抗基于篡改、伪造的攻击,像`ASLR`就是不可预测性的最直接展示<br>


## 2. 浏览器安全<br>
### 2.1 同源策略<br>
