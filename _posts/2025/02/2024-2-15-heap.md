---
layout: post
tags: [pwn]
title: "heap"
author: wsxk
date: 2025-2-15
comments: true
---

- [1. what is heap?](#1-what-is-heap)
  - [1.1 古早的动态分配：mmap](#11-古早的动态分配mmap)
- [2. dangers](#2-dangers)
- [3. tcache](#3-tcache)
- [4. Chunks and Metadata](#4-chunks-and-metadata)
- [5. Metadata Corruption](#5-metadata-corruption)
- [6. Safe-Linking](#6-safe-linking)


# 1. what is heap?<br>
heap其实指的是程序当中动态分配的内存空间<br>
其用途在于灵活的控制程序当中的内存大小。常见的使用例子是：游戏中NPC们的可变长度列表<br>
## 1.1 古早的动态分配：mmap<br>
mmap其实是最初的动态分配的雏形，它允许程序根据需要申请/释放内存，且内存长期存在，不会随函数结束就释放。<br>
但是mmap的缺点也有：**1、mmap申请/释放的内存大小必须是4096字节的整数倍，不够灵活；2、mmap申请/释放内存速度非常慢，因为涉及到系统调用，陷入内核**<br>


# 2. dangers<br>


# 3. tcache<br>

# 4. Chunks and Metadata<br>

# 5. Metadata Corruption<br>

# 6. Safe-Linking<br>
