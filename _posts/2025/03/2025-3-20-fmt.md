---
layout: post
tags: [pwn]
title: "fmt"
author: wsxk
date: 2025-3-20
comments: true
---

- [1. Format Strings(格式化字符串)](#1-format-strings格式化字符串)
  - [1.1 printf](#11-printf)
  - [1.2 printf argument locations](#12-printf-argument-locations)
- [2. Leaking Data](#2-leaking-data)
- [3. Writing Data](#3-writing-data)


# 1. Format Strings(格式化字符串)<br>
## 1.1 printf<br>
以常见的c语言函数printf为例,printf会接受不同数量的参数:<br>
```c
printf("Hello!\n");
printf("Hello %s!\n", name);
printf("There are %d lights!", 5);
printf("The average of %d, %d, and %d is %f", 1, 2, 3, float(1+2+3)/3.0);
```
**printf知道自己到底有多少参数的能力，就体现格式化字符串（format strings）上，即printf接受的第一个参数**<br>
格式化字符串中的类似`%d %s %f`中出现的数量，就代表后面有几个参数。<br>

## 1.2 printf argument locations<br>
已知printf根据格式化字符串中类似`%d %s %f`的出现的数量来得知后面的参数，那么参数实际的位置又在哪里呢？<br>
**在x64架构中，参数一部分在寄存器当中，还有相当一部分在栈中**<br>
```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(){
    int a =1;
    int b = 2;
    int c = 3;
    int d = 4;
    int e = 5;
    int f = 6;
    int g = 7;
    printf("%d %d %d %d %d %d %d\n",a,b,c,d,e,f,g);
}
```
![](https://raw.githubusercontent.com/wsxk/wsxk_pictures/main/2024-9-25/20250312000442.png)


# 2. Leaking Data<br>

# 3. Writing Data<br>






<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-C22S5YSYL7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-C22S5YSYL7');
</script>